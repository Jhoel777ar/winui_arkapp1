<Page
    x:Class="ark_app1.SalesHistoryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls">

    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Spacing="10" Margin="0,0,0,15">
            <TextBlock Text="Historial de Ventas" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBox x:Name="SearchBox" PlaceholderText="Buscar por cliente, producto o usuario..."
                     TextChanged="SearchBox_TextChanged" Width="350" HorizontalAlignment="Left"/>
        </StackPanel>
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollMode="Auto"
                      HorizontalScrollMode="Auto">
            <controls:DataGrid x:Name="DataGrid" ItemsSource="{x:Bind Records}"
                               AutoGenerateColumns="False" IsReadOnly="True"
                               GridLinesVisibility="Horizontal">
                <controls:DataGrid.Columns>
                    <controls:DataGridTemplateColumn Header="Fecha" Width="140">
                        <controls:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Fecha, Converter={StaticResource DateTimeToStringConverter}}"/>
                            </DataTemplate>
                        </controls:DataGridTemplateColumn.CellTemplate>
                    </controls:DataGridTemplateColumn>

                    <controls:DataGridTextColumn Header="ID Venta" Binding="{Binding VentaId}"/>
                    <controls:DataGridTextColumn Header="Cliente" Binding="{Binding Cliente}" Width="150"/>
                    <controls:DataGridTextColumn Header="Producto" Binding="{Binding Producto}" Width="200"/>
                    <controls:DataGridTextColumn Header="Cant." Binding="{Binding Cantidad}"/>
                    <controls:DataGridTextColumn Header="P. Unit." Binding="{Binding PrecioUnitarioDisplay}"/>
                    <controls:DataGridTextColumn Header="Subtotal" Binding="{Binding SubtotalDisplay}"/>
                    <controls:DataGridTextColumn Header="Total Venta" Binding="{Binding TotalVentaDisplay}"/>
                    <controls:DataGridTextColumn Header="Pago" Binding="{Binding TipoPago}"/>
                    <controls:DataGridTextColumn Header="Usuario" Binding="{Binding Usuario}"/>
                    <controls:DataGridTextColumn Header="Estado" Binding="{Binding Estado}"/>
                </controls:DataGrid.Columns>
            </controls:DataGrid>
        </ScrollViewer>
        <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center" Margin="0,10,0,0">
            <Button x:Name="PrevButton" Content="Anterior" Click="PrevButton_Click"/>
            <TextBlock x:Name="PageInfo" Text="PÃ¡gina 1 de 1" VerticalAlignment="Center"/>
            <Button x:Name="NextButton" Content="Siguiente" Click="NextButton_Click"/>
        </StackPanel>
    </Grid>
</Page>
