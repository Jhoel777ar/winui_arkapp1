<Page
    x:Class="ark_app1.InventoryAdjustmentsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls">

    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Spacing="10" Margin="0,0,0,15">
            <TextBlock Text="Historial de Ajustes de Inventario" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBox x:Name="SearchBox" PlaceholderText="Buscar por producto, código o usuario..."
                     TextChanged="SearchBox_TextChanged" Width="300" HorizontalAlignment="Left"/>
        </StackPanel>
        <ScrollViewer Grid.Row="1"
              VerticalScrollBarVisibility="Auto"
              HorizontalScrollBarVisibility="Auto">
            <controls:DataGrid x:Name="DataGrid" 
                       ItemsSource="{x:Bind Records}"
                       AutoGenerateColumns="False" 
                       IsReadOnly="True"
                       GridLinesVisibility="Horizontal"
                       CanUserResizeColumns="True"
                       CanUserReorderColumns="False">

                <controls:DataGrid.Columns>
                    <controls:DataGridTemplateColumn Header="Fecha" Width="140">
                        <controls:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Fecha, Converter={StaticResource DateTimeToStringConverter}}"/>
                            </DataTemplate>
                        </controls:DataGridTemplateColumn.CellTemplate>
                    </controls:DataGridTemplateColumn>

                    <controls:DataGridTextColumn Header="Código" Binding="{Binding Codigo}" Width="120"/>
                    <controls:DataGridTextColumn Header="Producto" Binding="{Binding Producto}" Width="300"/>
                    <controls:DataGridTextColumn Header="Cant." Binding="{Binding Cantidad}" Width="80"/>
                    <controls:DataGridTextColumn Header="Motivo" Binding="{Binding Motivo}" Width="350"/>
                    <controls:DataGridTextColumn Header="Usuario" Binding="{Binding Usuario}" Width="150"/>
                </controls:DataGrid.Columns>
            </controls:DataGrid>
        </ScrollViewer>
        <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center" Margin="0,10,0,0">
            <Button x:Name="PrevButton" Content="Anterior" Click="PrevButton_Click"/>
            <TextBlock x:Name="PageInfo" Text="Página 1 de 1" VerticalAlignment="Center"/>
            <Button x:Name="NextButton" Content="Siguiente" Click="NextButton_Click"/>
        </StackPanel>
    </Grid>
</Page>
