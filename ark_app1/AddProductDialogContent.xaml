<Window
    x:Class="ark_app1.AddCompraDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ark_app1">
    <ScrollViewer>
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock x:Name="TitleTextBlock" Text="Registrar Nueva Compra" FontSize="28" FontWeight="SemiBold" Margin="0,0,0,20"/>

            <StackPanel Grid.Row="1" Spacing="12">
                <ComboBox x:Name="ProveedorComboBox" Header="Proveedor (Opcional)" PlaceholderText="Seleccione un proveedor" ToolTipService.ToolTip="Seleccione un proveedor si aplica"/>
                <TextBox x:Name="CodigoTextBox" Header="Código *" PlaceholderText="Ej: PROD001" ToolTipService.ToolTip="Código único del producto (máx. 50 chars)"/>
                <TextBox x:Name="NombreTextBox" Header="Nombre del Producto *" PlaceholderText="Ej: Gaseosa 3L" ToolTipService.ToolTip="Nombre descriptivo (máx. 150 chars)"/>
                <ComboBox x:Name="CategoriaComboBox" Header="Categoría (Opcional)" PlaceholderText="Seleccione categoría" ToolTipService.ToolTip="Categoría del producto"/>
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBox Grid.Column="0" x:Name="TallaTextBox" Header="Talla (Opcional)" PlaceholderText="M, L" ToolTipService.ToolTip="Talla si aplica (máx. 20 chars)"/>
                    <TextBox Grid.Column="1" x:Name="ColorTextBox" Header="Color (Opcional)" PlaceholderText="Rojo, Azul" ToolTipService.ToolTip="Color si aplica (máx. 30 chars)"/>
                </Grid>
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <NumberBox Grid.Column="0" x:Name="PrecioCompraNumberBox" Header="Precio Compra *" Minimum="0" Value="0" SpinButtonPlacementMode="Compact" ToolTipService.ToolTip="Precio de compra (> 0)"/>
                    <NumberBox Grid.Column="1" x:Name="PrecioVentaNumberBox" Header="Precio Venta *" Minimum="0.01" SpinButtonPlacementMode="Compact" ToolTipService.ToolTip="Precio de venta (> 0)"/>
                </Grid>
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <NumberBox Grid.Column="0" x:Name="CantidadNumberBox" Header="Cantidad *" Minimum="1" Value="1" SpinButtonPlacementMode="Compact" ToolTipService.ToolTip="Cantidad a comprar (> 0)"/>
                    <TextBox Grid.Column="1" x:Name="UnidadMedidaTextBox" Header="Unidad (Opcional)" PlaceholderText="Unidad, Caja" ToolTipService.ToolTip="Unidad de medida (máx. 20 chars)"/>
                </Grid>
                <NumberBox x:Name="StockMinimoNumberBox" Header="Stock Mínimo (Opcional)" Minimum="0" Value="1" SpinButtonPlacementMode="Compact" ToolTipService.ToolTip="Stock mínimo deseado (default 1)"/>
                <Button x:Name="AddProductButton" Content="Agregar Producto" Click="AddProductButton_Click" HorizontalAlignment="Stretch" Style="{StaticResource AccentButtonStyle}" ToolTipService.ToolTip="Agrega el producto a la lista"/>
                <InfoBar x:Name="InfoBar" IsOpen="False"/>
            </StackPanel>

            <Grid Grid.Row="2" Margin="0,24,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock Text="Productos en la compra:" FontSize="18" FontWeight="SemiBold"/>
                <ListView x:Name="ProductosListView" Grid.Row="1" MinHeight="200">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="local:ProductoTemp">
                            <Grid Padding="8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="3*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="Nom:" FontWeight="Bold"/>
                                    <TextBlock Text="{x:Bind Nombre}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="4">
                                    <TextBlock Text="Cant:" FontWeight="Bold"/>
                                    <TextBlock Text="{x:Bind Cantidad}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="4">
                                    <TextBlock Text="P. C:" FontWeight="Bold"/>
                                    <TextBlock Text="{x:Bind PrecioCompra}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="3" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="4">
                                    <TextBlock Text="Subt:" FontWeight="Bold"/>
                                    <TextBlock Text="{x:Bind Subtotal}"/>
                                </StackPanel>
                                <Button Grid.Column="4"
                    Content="✕"
                    Foreground="Red"
                    Tag="{x:Bind}"
                    Click="RemoveProduct_Click"
                    ToolTipService.ToolTip="Eliminar producto"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>

            <StackPanel Grid.Row="3" Margin="0,24,0,0" Spacing="12">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                    <Button x:Name="SaveButton" Content="Guardar Compra" Click="SaveButton_Click" Style="{StaticResource AccentButtonStyle}" ToolTipService.ToolTip="Guardar la compra"/>
                    <Button x:Name="CancelButton" Content="Cancelar" Click="CancelButton_Click" ToolTipService.ToolTip="Cancelar operación"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>